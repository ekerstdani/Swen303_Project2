extends layout

block content
    nav(class="navbar navbar-default navbar-fixed-top")
        div(class="container-fluid")
            div(class="navbar-header")
                a(class="navbar-brand" href="/") !{title}

            div(class="collapse navbar-collapse" id="bs-example-navbar-collapse-1")
                ul(class="nav navbar-nav")
                    li
                        a(href="/") Home
                    li
                        a(href="/browse") Browse
                    li
                        a(href="/search") Search
                    if(signedInUser)
                        li
                            a(href="/addItem") Sell
                    else
                        li
                            a(href="/login?message=Please login first&redirect=/addItem") Sell
                ul(class="nav navbar-nav navbar-right")
                    if signedInUser
                        li
                            a(href="/userPage" class="btn-primary" onmouseover="showOptions()" onmouseout="hideOptions()") !{signedInUser} &#x25BC;
                            span(id="userOptions" style="display:none; position: absolute;" onmouseover="showOptions()" onmouseout="hideOptions()")
                                a(href="/profile?user=" + id class="btn btn-default btn-sm") View public profile
                                a(href="/logout" class="btn btn-default btn-sm") Logout
                    else
                        li
                            a(href="/login") Sign In

    br
    br
    br

    .container
        h2 Items I'm selling
        br

        .dropdown
            button.btn.btn-default.dropdown-toggle(type='button', data-toggle='dropdown')
              | Sort By
              span.caret
            ul.dropdown-menu
                li
                    a(href="/profile?sortBy=lowestPrice") Lowest Price
                li
                    a(href="/profile?sortBy=highestPrice") Highest Price
                li
                    a(href="/profile?sortBy=name") Name
                li
                    a(href="/profile?sortBy=newestFirst") Newest First

    div(style="margin-left:20%; margin-right:20%;")
        table(class="table table-striped table-hover")

            thead
                tr
                    th(width="20%")
                    th(width="20%") Name
                    th(width="45%") Description
                    th(width="15%") Price
                    th(width="5%") Actions
                tr

            tbody
                each val in list
                    tr
                        th
                            a(href="/product?sid=" + val.sid)
                                img(src=val.url, width="100%")
                        th
                            a(href="/product?sid=" + val.sid) !{val.label}
                        th !{val.description}
                        th $!{val.price}
                        th
                            a(class="btn btn-primary btn-xs", href="/editItem?sid=" + val.sid) Edit
                            a(class="btn btn-primary btn-xs", href="/doDeleteItem?sid=" + val.sid) Delete